#: kivy 2.0.0
#:import now datetime.datetime

<Page3>:
    rv:rv
    canvas.before:
        Color:
            rgb: 1,1,1
        Rectangle:
            size: self.size
    size:root.size
    BoxLayout:
        size: self.parent.size
        size_hint: None, None
        orientation: 'vertical'
        padding: 10, 10
        spacing: 10
        BoxLayout:
            size_hint_y: 0.1
            background_color: 0,0,0,1
            orientation:'horizontal'
            RoundedButton
                size_hint_x: 0.2
                color: 0,0,0
                text: 'back'
                on_press: app.sm.current = "Home"
                #on_release: app.on_release(self, 6)
            TimeLabel:
                size_hint_x:0.5
                color: 0,0,0
            Label:
                size_hint_x: 0.3
                color: 0,0,0
                text: "Battery"
        RV:
            viewclass: 'RallyRow'
            id: rv
        RoundedButton:
            size_hint_y: 0.1
            color: 0,0,0
            text: 'Capture'
            on_press: root.on_capture(now.now())

<StageSel>:
    stg_sel_drop: stg_sel_drop
    stg_sel_text: stg_sel_text
    day: day.values
    stg_sel: stg_sel
    box: box
    canvas.before:
        Color:
            rgb: 1,1,1
        Rectangle:
            size: self.size
    size:root.size
    BoxLayout:
        id: box
        size: self.parent.size
        size_hint: None, None
        orientation: "vertical"
        padding: 10, 10
        spacing: 10
        BoxLayout:
            size_hint_y: 0.05
            background_color: 0,0,0,1
            orientation:'horizontal'
            RoundedButton
                size_hint_x: 0.2
                color: 0,0,0
                text: 'back'
                on_press: app.sm.current = "Home"
                #on_release: app.on_release(self, 6)
            TimeLabel:
                size_hint_x:0.5
                color: 0,0,0
            Label:
                size_hint_x: 0.3
                color: 0,0,0
                text: "Battery"
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: 0.15
            Label:
                size_hint_x: 0.4
                text: "Present Task"
                color: 0,0,0
            Spinner:
                id: stage
                text: 'Arrival in Special Stage'
                size_hint_x:0.6
                values: 'Arrival in Special Stage', 'Start of Special Stage', 'Finish of Special Stage','Rally Start of the day', 'Rally Finish of the day','Service IN', 'Service OUT', 'Regroup IN', 'Regroup OUT'
                on_text: root.on_stage(self.text)
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: 0.15
            Label:
                size_hint_x: 0.4
                text: "Rally Day"
                color: 0,0,0
            Spinner:
                id: day
                text: '1'
                size_hint_x:0.6
                values: '1','2','3','4','5'
                on_text: root.but_text_ch(day_no=self.text)
        BoxLayout:
            id: stg_sel
            orientation: "horizontal"
            size_hint_y: 0.15
            Label:
                id: stg_sel_text
                size_hint_x: 0.4
                text: "Stage No."
                color: 0,0,0
            Spinner:
                id: stg_sel_drop
                text: '1'
                size_hint_x:0.6
                values: '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30'
                on_text: root.but_text_ch(stg_no=self.text)
        Label:
            canvas.before:
                Color:
                    rgb: 1,1,1
                Rectangle:
                    size: self.size
            size_hint_x: 1
            size_hint_y: 0.5 if root.show_stg_sel else 0.65
            text: ''
            color: 0,0,0

<ViewLog>:
    rv:rv
    canvas.before:
        Color:
            rgb: 1,1,1
        Rectangle:
            size: self.size
    BoxLayout:
        size: self.parent.size
        size_hint: None, None
        orientation: "vertical"
        padding: 10, 10
        spacing: 10
        BoxLayout:
            size_hint_y: 0.05
            background_color: 0,0,0,1
            orientation:'horizontal'
            RoundedButton
                size_hint_x: 0.2
                color: 0,0,0
                text: 'back'
                on_press: app.sm.current = "Home"
                #on_release: app.on_release(self, 6)
            TimeLabel:
                size_hint_x:0.5
                color: 0,0,0
            Label:
                size_hint_x: 0.3
                color: 0,0,0
                text: "Battery"
        RV:
            id:rv
            viewclass: 'LogRow'
